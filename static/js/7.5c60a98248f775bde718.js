webpackJsonp([7],{"+kDu":function(e,t,n){function s(e){n("ULjQ")}var r=n("VU/8")(n("hMro"),n("U8ZL"),s,"data-v-f0ab166e",null);e.exports=r.exports},"1U4D":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{visible:e.dialogResetPassword,width:"25%",center:"","show-close":!1,title:"重置密码"}},[n("el-form",{ref:"resetPwd",attrs:{model:e.passwordForm,rules:e.rules}},[n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{type:"password"},model:{value:e.passwordForm.password,callback:function(t){e.$set(e.passwordForm,"password",t)},expression:"passwordForm.password"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[n("el-input",{attrs:{type:"password"},model:{value:e.passwordForm.confirmPassword,callback:function(t){e.$set(e.passwordForm,"confirmPassword",t)},expression:"passwordForm.confirmPassword"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.cancelResetPassword}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmResetPassword}},[e._v("确 定")])],1)],1)},staticRenderFns:[]}},"9m3A":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={methods:{pageInfoChange:function(e,t){this.$emit("pageInfoChange",e,t)},handleSizeChange:function(e){this.pageInfoChange(e,1)},handleCurrentChange:function(e){this.pageInfoChange(this.pageSize,e)}},props:["pageSize","currentPage","total","pageSizes"],data:function(){return{}}}},A9ag:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("Dd8w"),r=n.n(s),o=n("lMz8"),i=n("yirM"),a=n.n(i),c=n("NYxO");t.default={name:"",props:["users"],data:function(){return{resetUserId:null,dialogResetPassword:!1}},components:{ResetPassword:a.a},methods:{goUserDetail:function(e,t){this.$router.push("/user/"+e.id)},userActiveAction:function(e,t){var n=this,s={user_ids:e,is_active:t};this.$ajaxt.put(o.m,s).then(function(e){200==e.status&&n.$message({type:"success",message:"操作成功"})}).catch(function(){n.$message({type:"error",message:"操作失败"})})},disableUser:function(e,t){var n=this;this.$confirm("无效之后该用户不能登录，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.userActiveAction([t.id],!1)}).catch(function(e){n.$message({type:"info",message:"已取消无效"})})},activeUser:function(e,t){var n=this;this.$confirm("有效之后该用户可以登录，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.userActiveAction([t.id],!0)}).catch(function(){n.$message({type:"info",message:"已取消有效"})})},resetPassword:function(e,t){this.resetUserId=t.id,this.dialogResetPassword=!0},dialogResetPasswordVisible:function(){this.dialogResetPassword=!1}},computed:r()({},n.i(c.b)({userinfo:function(e){return e.userinfo}}))}},B3Cl:function(e,t,n){var s=n("Y3ZK");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);n("rjj0")("5ed7d397",s,!0)},BMys:function(e,t,n){function s(e){n("uFkv")}var r=n("VU/8")(n("9m3A"),n("LPte"),s,null,null);e.exports=r.exports},GNKN:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"user-home"}},[n("view-switch",{attrs:{views:e.view_list,activeView:e.activeView},on:{switchView:e.switchView}}),e._v(" "),n("form-top",{attrs:{formTopBtns:e.formTopBtns},on:{formTopAction:e.formTopAction}}),e._v(" "),n("pagination",{attrs:{pageSizes:[20,40,80],pageSize:e.pageSize,currentPage:e.page,total:e.total},on:{pageInfoChange:e.pageInfoChange}}),e._v(" "),n("el-row",{attrs:{gutter:20}},["list"==e.activeView?n("user-list",{attrs:{users:e.users}}):e._e()],1)],1)},staticRenderFns:[]}},JtTg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("Dd8w"),r=n.n(s),o=n("lMz8"),i=n("lC78"),a=n("Yunt"),c=n.n(a),l=n("BMys"),u=n.n(l),p=n("+kDu"),d=n.n(p),f=n("TO1l"),m=n.n(f),v=n("NYxO");t.default={name:"user_home",data:function(){var e=i.a.get("user_home_view");return""!=e&&null!=e||(e="list"),{formTopBtns:{create:!0},view_list:["kanban","list"],activeView:e,loading:!1,pageSize:20,total:0,page:1,users:[]}},components:{UserList:c.a,ViewSwitch:d.a,Pagination:u.a,FormTop:m.a},methods:{getAllUser:function(){var e=this;this.loading=!0,this.$ajax.get(o.l,{params:{page:this.page,page_size:this.pageSize}}).then(function(t){e.loading=!1;var n=t.status,s=t.data;200==n&&(e.users=s.results,e.total=s.count)})},switchView:function(e){this.activeView=e,i.a.set("user_home_view",e)},pageInfoChange:function(e,t){this.page=t,this.pageSize=e,this.getAllUser()},changeCreateForm:function(){this.$router.push("/user/new")}},created:function(){this.$nextTick(function(){this.getAllUser()})},computed:r()({},n.i(v.b)({userinfo:function(e){return e.userinfo}}))}},LPte:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]}},TO1l:function(e,t,n){function s(e){n("B3Cl")}var r=n("VU/8")(n("nWf1"),n("dPJm"),s,null,null);e.exports=r.exports},U8ZL:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-button-group",{staticClass:"view-switch"},[e._l(e.views,function(t,s){return[n("el-button",{key:s,attrs:{size:"mini",type:e.viewDict[t]},on:{click:function(n){e.switchView(t)}}},[e._v(e._s(e.viewLabel[t]))])]})],2)},staticRenderFns:[]}},ULjQ:function(e,t,n){var s=n("rOCs");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);n("rjj0")("1acd35a8",s,!0)},Vryk:function(e,t,n){t=e.exports=n("FZ+f")(!0),t.push([e.i,".pagination{margin:5px;display:inline-block}","",{version:3,sources:["F:/selenium_work/tcis/web/src/pages/common/Pagination.vue"],names:[],mappings:"AACA,YACE,WAAY,AACZ,oBAAsB,CACvB",file:"Pagination.vue",sourcesContent:["\n.pagination {\n  margin: 5px;\n  display: inline-block;\n}\n"],sourceRoot:""}])},Y3ZK:function(e,t,n){t=e.exports=n("FZ+f")(!0),t.push([e.i,".form-top{display:inline-block;margin:5px}","",{version:3,sources:["F:/selenium_work/tcis/web/src/pages/common/form_top.vue"],names:[],mappings:"AACA,UACE,qBAAsB,AACtB,UAAY,CACb",file:"form_top.vue",sourcesContent:["\n.form-top {\n  display: inline-block;\n  margin: 5px;\n}\n"],sourceRoot:""}])},Yunt:function(e,t,n){var s=n("VU/8")(n("A9ag"),n("pQ/n"),null,null,null);e.exports=s.exports},dPJm:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-top"},[e.formTopBtns.create?n("el-button",{attrs:{plain:"",type:"primary",icon:"el-icon-document",size:"small"},on:{click:function(t){e.formTopAction("create")}}},[e._v("创建")]):e._e(),e._v(" "),e.formTopBtns.edit?n("el-button",{attrs:{plain:"",type:"warning",icon:"el-icon-edit",size:"small"},on:{click:function(t){e.formTopAction("edit")}}},[e._v("编辑")]):e._e(),e._v(" "),e.formTopBtns.save?n("el-button",{attrs:{plain:"",type:"success",icon:"el-icon-message",size:"small"},on:{click:function(t){e.formTopAction("save")}}},[e._v("保存")]):e._e(),e._v(" "),e.formTopBtns.cancel?n("el-button",{attrs:{plain:"",type:"danger",icon:"el-icon-close",size:"small"},on:{click:function(t){e.formTopAction("cancel")}}},[e._v("取消")]):e._e()],1)},staticRenderFns:[]}},dVaH:function(e,t,n){var s=n("VU/8")(n("JtTg"),n("GNKN"),null,null,null);e.exports=s.exports},hMro:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"view_switch",props:["views","activeView"],data:function(){var e={};for(var t in this.views){var n=this.views[t];n==this.activeView?e[n]="primary":e[n]=""}return{viewDict:e,viewLabel:{kanban:"看板",list:"列表",gantt:"甘特图"}}},methods:{switchView:function(e){for(var t in this.views){var n=this.views[t];this.viewDict[n]=n==e?"primary":""}this.$emit("switchView",e)}},watch:{activeView:function(e,t){for(var n in this.views){var s=this.views[n];this.viewDict[s]=s==e?"primary":""}}}}},lMz8:function(e,t,n){"use strict";n.d(t,"l",function(){return s}),n.d(t,"t",function(){return r}),n.d(t,"s",function(){return o}),n.d(t,"n",function(){return i}),n.d(t,"m",function(){return a}),n.d(t,"q",function(){return c}),n.d(t,"o",function(){return l}),n.d(t,"r",function(){return u}),n.d(t,"p",function(){return p}),n.d(t,"f",function(){return d}),n.d(t,"b",function(){return f}),n.d(t,"h",function(){return m}),n.d(t,"j",function(){return v}),n.d(t,"i",function(){return w}),n.d(t,"k",function(){return g}),n.d(t,"e",function(){return _}),n.d(t,"g",function(){return h}),n.d(t,"a",function(){return b}),n.d(t,"d",function(){return A}),n.d(t,"c",function(){return y});var s="/user/",r="/user/login/",o="/user/logout/",i="/user/reset_password/",a="/user/user_active/",c="/group/",l="/permission/",u="/permission/get_all_permission/",p="/permission/translate_all_permission/",d="/project/project/",f="/project/project/get_all_project/",m="/project/project_task/",v="/project/project_task/project_task_kanban/",w="/project/project_task/project_task_gantt/",g="/project/project_member/",_="/project_bug/project_bug/",h="/project_bug/project_bug/project_bug_kanban/",b="/project_test/project_test/",A="/project_test/project_test/project_test_kanban/",y="/project_test/project_test_type/"},nWf1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"form-rop",props:["formTopBtns"],data:function(){return{}},methods:{formTopAction:function(e){this.$emit("formTopAction",e)}}}},"pQ/n":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.users},on:{"row-dblclick":e.goUserDetail}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"username_zh",label:"用户名中文"}}),e._v(" "),n("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),e._v(" "),n("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),e._v(" "),n("el-table-column",{attrs:{label:"所属部门"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.department?[e._v("\n            "+e._s(t.row.department.name)+"\n            ")]:void 0}}])}),e._v(" "),n("el-table-column",{attrs:{label:"职位"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.position?[e._v("\n            "+e._s(t.row.position.name)+"\n            ")]:void 0}}])}),e._v(" "),n("el-table-column",{attrs:{label:"是否有效"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.is_active?n("span",[e._v("是")]):n("span",[e._v("否")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"超级用户"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.is_superuser?n("span",[e._v("是")]):n("span",[e._v("否")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"上次登录时间"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.last_login?[e._v("\n            "+e._s(e._f("stringTimeFormat")(t.row.last_login))+"\n            ")]:void 0}}])}),e._v(" "),e.userinfo.is_superuser?n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.is_active?n("el-button",{staticClass:"table-btn",attrs:{type:"danger",size:"mini"},on:{click:function(n){e.disableUser(t.$index,t.row)}}},[e._v("无效")]):n("el-button",{staticClass:"table-btn",attrs:{type:"danger",size:"mini"},on:{click:function(n){e.activeUser(t.$index,t.row)}}},[e._v("有效")]),e._v(" "),n("el-button",{staticClass:"table-btn",attrs:{type:"info",size:"mini"},on:{click:function(n){e.resetPassword(t.$index,t.row)}}},[e._v("重置密码")])]}}])}):e._e()],1),e._v(" "),n("reset-password",{attrs:{dialogResetPassword:e.dialogResetPassword,userId:e.resetUserId},on:{dialogResetPasswordVisible:e.dialogResetPasswordVisible}})],1)},staticRenderFns:[]}},rDU2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("lMz8");t.default={name:"reset_password",props:["userId","dialogResetPassword"],data:function(){var e=this;return{passwordForm:{password:"",confirmPassword:""},rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:function(e,t,n){""===t?n(new Error("请再次输入密码")):/^[a-zA-Z0-9_-]{6,16}$/.test(t)?n():n(new Error("密码至少6位,由大小写字母和数字,-,_组成"))},trigger:"blur"}],confirmPassword:[{required:!0,message:"请输入确认密码",trigger:"blur"},{validator:function(t,n,s){""===n?s(new Error("请再次输入确认密码")):/^[a-zA-Z0-9_-]{6,16}$/.test(n)?n!==e.passwordForm.password?s(new Error("两次输入密码不一致!")):s():s(new Error("密码至少6位,由大小写字母和数字,-,_组成"))},trigger:"blur"}]}}},methods:{confirmResetPassword:function(){var e=this;this.$refs.resetPwd.validate(function(t){if(t){var n={user_id:e.userId,password:e.passwordForm.password,confirm_password:e.passwordForm.confirmPassword};e.$ajax.post(s.n,n).then(function(e){}),e.$emit("dialogResetPasswordVisible")}})},cancelResetPassword:function(){this.$emit("dialogResetPasswordVisible")}},watch:{dialogResetPassword:function(){this.dialogResetPassword||this.$refs.resetPwd.resetFields()}}}},rOCs:function(e,t,n){t=e.exports=n("FZ+f")(!0),t.push([e.i,".view-switch[data-v-f0ab166e]{position:absolute;top:30px;z-index:999;display:inline-block}","",{version:3,sources:["F:/selenium_work/tcis/web/src/pages/common/view_switch.vue"],names:[],mappings:"AACA,8BACE,kBAAmB,AACnB,SAAU,AACV,YAAa,AACb,oBAAsB,CACvB",file:"view_switch.vue",sourcesContent:["\n.view-switch[data-v-f0ab166e] {\n  position: absolute;\n  top: 30px;\n  z-index: 999;\n  display: inline-block;\n}\n"],sourceRoot:""}])},uFkv:function(e,t,n){var s=n("Vryk");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);n("rjj0")("fbc3b3bc",s,!0)},yirM:function(e,t,n){var s=n("VU/8")(n("rDU2"),n("1U4D"),null,null,null);e.exports=s.exports}});
//# sourceMappingURL=7.5c60a98248f775bde718.js.map